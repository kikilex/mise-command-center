<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Focus Queue V7 (Full + Sessions)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes confetti-fall { 0% { transform: translateY(-100%) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(720deg); opacity: 0; } }
    .confetti { position: fixed; width: 10px; height: 10px; top: -10px; animation: confetti-fall 3s ease-out forwards; z-index: 9999; }
    @keyframes money-fall { 0% { transform: translateY(-50px) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(360deg); opacity: 0; } }
    .money { position: fixed; font-size: 30px; top: -50px; animation: money-fall 2.5s ease-out forwards; z-index: 9999; }
    @keyframes firework { 0% { transform: scale(0); opacity: 1; } 50% { transform: scale(1); opacity: 1; } 100% { transform: scale(1.5); opacity: 0; } }
    .firework { position: fixed; font-size: 60px; animation: firework 1s ease-out forwards; z-index: 9999; }
    @keyframes shake { 0%, 100% { transform: translateX(0); } 10% { transform: translateX(-8px) rotate(-1deg); } 30% { transform: translateX(8px) rotate(1deg); } 50% { transform: translateX(-6px); } 70% { transform: translateX(6px); } 90% { transform: translateX(-3px); } }
    .shake { animation: shake 0.5s ease-in-out; }
    @keyframes fire-float { 0%, 100% { transform: translateY(0) scale(1); } 50% { transform: translateY(-4px) scale(1.05); } }
    .fire-float { animation: fire-float 0.8s ease-in-out infinite; }
    @keyframes flame-dance { 0%, 100% { transform: translateY(0) scaleY(1) rotate(-2deg); opacity: 0.8; } 25% { transform: translateY(-3px) scaleY(1.1) rotate(2deg); opacity: 1; } 50% { transform: translateY(-5px) scaleY(1.15) rotate(-1deg); opacity: 0.9; } 75% { transform: translateY(-2px) scaleY(1.05) rotate(1deg); opacity: 1; } }
    .flame-dance { animation: flame-dance 0.5s ease-in-out infinite; }
    @keyframes flame-flicker { 0%, 100% { opacity: 0.8; } 50% { opacity: 1; } }
    .flame-flicker { animation: flame-flicker 0.3s ease-in-out infinite; }
    @keyframes glow-pulse { 0%, 100% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.3); } 50% { box-shadow: 0 0 40px rgba(245, 158, 11, 0.6); } }
    .glow-pulse { animation: glow-pulse 2s ease-in-out infinite; }
    @keyframes pulse-border { 0%, 100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.7); } 50% { box-shadow: 0 0 0 15px rgba(245, 158, 11, 0); } }
    .pulse-border { animation: pulse-border 1.5s ease-in-out infinite; }
    @keyframes hype-pop { 0% { transform: scale(0); opacity: 0; } 50% { transform: scale(1.1); } 100% { transform: scale(1); opacity: 1; } }
    .hype-pop { animation: hype-pop 0.4s ease-out forwards; }
    @keyframes legendary-flash { 0%, 100% { opacity: 0; } 50% { opacity: 1; } }
    .legendary-flash { animation: legendary-flash 0.1s ease-in-out 5; }
    @keyframes session-pop { 0% { transform: scale(0.5); opacity: 0; } 50% { transform: scale(1.2); } 100% { transform: scale(1); opacity: 1; } }
    .session-pop { animation: session-pop 0.4s ease-out forwards; }
    @keyframes session-pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.15); } }
    .session-pulse { animation: session-pulse 0.6s ease-in-out; }
    @keyframes dot-appear { 0% { transform: scale(0); } 100% { transform: scale(1); } }
    .dot-appear { animation: dot-appear 0.3s ease-out forwards; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    .pulse-opacity { animation: pulse 1s ease-in-out infinite; }
    .fire-legendary { filter: brightness(1.3) saturate(1.5) drop-shadow(0 0 8px rgba(245, 158, 11, 0.8)); animation: flame-flicker 0.2s ease-in-out infinite; }
  </style>
</head>
<body class="bg-slate-50 min-h-screen font-sans">
  <nav class="bg-white border-b border-slate-200 px-6 py-3 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto flex items-center justify-between">
      <div class="flex items-center gap-3"><div class="w-8 h-8 bg-violet-600 rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm">M</span></div><span class="font-bold text-slate-800">Mise Command Center</span></div>
      <div class="flex items-center gap-4"><span class="text-slate-500">Tasks</span><span class="text-slate-500">Projects</span><span class="text-slate-500">AI</span><div class="w-8 h-8 bg-gradient-to-br from-violet-500 to-purple-600 rounded-full"></div></div>
    </div>
  </nav>
  <main class="max-w-7xl mx-auto px-6 py-8">
    <div class="flex flex-col lg:flex-row gap-8">
      <div class="flex-1 space-y-6">
        <!-- Fire Bar -->
        <div class="rounded-2xl border-2 shadow-sm overflow-hidden transition-all duration-700" id="fireCard" style="background: #f8fafc; border-color: #e2e8f0;">
          <div class="px-6 py-4 border-b transition-all duration-500 flex items-center justify-between" id="fireHeader" style="background: #f8fafc; border-color: #e2e8f0;">
            <div class="flex items-center gap-3"><div class="w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-500" id="fireIcon" style="background: linear-gradient(135deg, #94a3b8, #64748b);"><span class="text-2xl">üî•</span></div><div><h2 class="font-bold transition-colors duration-500" id="fireTitle" style="color: #1e293b;">Today's Progress</h2><p class="text-xs transition-colors duration-500" id="fireSubtitle" style="color: #64748b;">Light your first fire!</p></div></div>
            <div class="text-right"><div class="text-3xl font-black transition-colors duration-500" id="fireCount" style="color: #cbd5e1;">0<span style="color: #94a3b8;"> / 8</span></div></div>
          </div>
          <div class="px-6 py-5 transition-all duration-500" id="fireBody">
            <div class="relative"><div class="h-14 rounded-xl overflow-hidden relative transition-all duration-500" id="progressTrack" style="background: #e2e8f0;"><div class="h-full transition-all duration-700 ease-out rounded-xl" id="fireProgress" style="width: 0%; background: #cbd5e1;"></div></div><div class="absolute inset-0 flex items-center justify-between px-3" id="fireEmojis"></div><div class="absolute -right-2 -top-2 bg-gradient-to-r from-yellow-400 to-amber-500 text-white text-sm font-bold px-3 py-1 rounded-full shadow-lg hidden" id="exceededBadge"><span id="exceededCount">+0</span> üíé</div></div>
            <div class="flex justify-center gap-2 mt-3 h-8 overflow-hidden" id="dancingFlames" style="opacity: 0;"></div>
            <div class="mt-3 flex gap-2 justify-center"><button onclick="setFireLevel(0)" class="px-3 py-1 bg-slate-200 rounded-lg text-xs">0</button><button onclick="setFireLevel(3)" class="px-3 py-1 bg-slate-200 rounded-lg text-xs">3</button><button onclick="setFireLevel(6)" class="px-3 py-1 bg-orange-200 rounded-lg text-xs">6 üî•</button><button onclick="setFireLevel(8)" class="px-3 py-1 bg-red-200 rounded-lg text-xs">8 ‚úÖ</button><button onclick="setFireLevel(12)" class="px-3 py-1 bg-yellow-300 rounded-lg text-xs font-bold">12 üëë</button></div>
          </div>
        </div>
        
        <!-- Focus Queue with Session Tracking -->
        <div class="bg-white rounded-2xl border-2 border-violet-500 shadow-lg overflow-hidden">
          <div class="bg-gradient-to-r from-violet-600 to-purple-600 px-6 py-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center"><span class="text-xl">‚ö°</span></div>
              <div><h2 class="font-bold text-white">Focus Queue</h2><p class="text-xs text-violet-200">2 of 5 ‚Ä¢ Stay locked in</p></div>
            </div>
            <div class="flex items-center gap-3">
              <!-- Session Badge (animated) -->
              <div id="sessionBadge" class="flex items-center gap-2 bg-white/20 rounded-full px-3 py-1.5 transition-all duration-300">
                <span class="text-white text-sm font-medium">Session</span>
                <span id="sessionNum" class="bg-white text-violet-600 text-sm font-bold w-6 h-6 rounded-full flex items-center justify-center transition-all duration-300">1</span>
              </div>
              <!-- Progress dots -->
              <div class="flex gap-1.5">
                <div class="w-3 h-3 bg-green-400 rounded-full"></div>
                <div class="w-3 h-3 bg-yellow-400 rounded-full animate-pulse"></div>
                <div class="w-3 h-3 bg-white/30 rounded-full"></div>
                <div class="w-3 h-3 bg-white/30 rounded-full"></div>
                <div class="w-3 h-3 bg-white/30 rounded-full"></div>
              </div>
            </div>
          </div>
          <div class="p-6">
            <div class="flex items-start justify-between mb-4">
              <div>
                <div class="flex items-center gap-2 mb-2">
                  <span class="px-2 py-0.5 bg-red-100 text-red-600 text-xs rounded-full font-medium">HIGH</span>
                  <span class="px-2 py-0.5 bg-violet-100 text-violet-600 text-xs rounded-full font-medium">Faithstone</span>
                </div>
                <h3 class="text-lg font-bold text-slate-800">Review TikTok content batch for Mom's approval</h3>
                <p class="text-slate-500 text-sm mt-1">Check the 5 prayer videos before posting.</p>
              </div>
            </div>
            
            <!-- Timer with Session Indicator -->
            <div class="flex items-center justify-center my-6">
              <div class="bg-slate-100 rounded-2xl px-8 py-5 text-center relative">
                <div class="text-5xl font-mono font-bold text-slate-800" id="timerDisplay">00:00</div>
                <div class="text-sm text-slate-500 mt-2" id="timerLabel">Ready to start</div>
                <!-- Session dots under timer -->
                <div id="sessionIndicator" class="mt-3 hidden">
                  <div class="flex items-center justify-center gap-1.5" id="sessionDots"></div>
                </div>
              </div>
            </div>
            
            <!-- Controls -->
            <div class="flex items-center justify-center gap-3" id="timerControls">
              <button onclick="startTimer()" class="px-8 py-3 bg-green-500 hover:bg-green-600 rounded-xl font-bold text-white text-lg shadow-lg shadow-green-500/30 flex items-center gap-2">‚ñ∂ Start</button>
            </div>
            
            <!-- Session History (expandable) -->
            <div id="sessionHistory" class="mt-4 hidden">
              <button onclick="toggleHistory()" class="w-full text-left text-xs text-slate-400 uppercase font-medium mb-2 flex items-center gap-2">
                <span>Session History</span>
                <span id="historyArrow">‚ñº</span>
              </button>
              <div id="sessionList" class="space-y-1.5"></div>
            </div>
            
            <!-- Up Next -->
            <div class="mt-6 pt-4 border-t border-slate-200">
              <div class="text-xs text-slate-400 uppercase font-medium mb-2">Up Next</div>
              <div class="flex items-center gap-3 text-slate-600">
                <div class="w-7 h-7 bg-slate-200 rounded-lg flex items-center justify-center text-sm font-medium">3</div>
                <span>Create Spanish translation brief</span>
                <span class="ml-auto text-xs bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full">MEDIUM</span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- What's Next (collapsed for space) -->
        <div class="bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden">
          <div class="bg-slate-50 px-6 py-4 border-b border-slate-200 flex items-center justify-between">
            <div class="flex items-center gap-3"><div class="w-10 h-10 rounded-xl bg-emerald-600 flex items-center justify-center"><span class="text-xl">üéØ</span></div><div><h2 class="font-bold text-slate-800">What's Next</h2><p class="text-xs text-slate-500">4 projects</p></div></div>
            <button class="text-violet-600 text-sm font-medium">All Tasks ‚Üí</button>
          </div>
          <div class="p-4 grid grid-cols-2 gap-3">
            <div class="p-3 rounded-xl border bg-slate-50 border-slate-200"><div class="flex items-center gap-2 mb-2"><span>üìò</span><span class="font-medium text-slate-800 text-sm">SWP Extended</span></div><div class="h-1.5 bg-slate-200 rounded-full"><div class="h-full bg-violet-500 rounded-full" style="width: 27%"></div></div></div>
            <div class="p-3 rounded-xl border bg-slate-50 border-slate-200"><div class="flex items-center gap-2 mb-2"><span>üá™üá∏</span><span class="font-medium text-slate-800 text-sm">Spanish</span></div><div class="h-1.5 bg-slate-200 rounded-full"><div class="h-full bg-violet-500 rounded-full" style="width: 25%"></div></div></div>
            <div class="p-3 rounded-xl border bg-slate-50 border-slate-200"><div class="flex items-center gap-2 mb-2"><span>üì±</span><span class="font-medium text-slate-800 text-sm">TikTok</span></div><div class="h-1.5 bg-slate-200 rounded-full"><div class="h-full bg-violet-500 rounded-full" style="width: 53%"></div></div></div>
            <div class="p-3 rounded-xl border bg-emerald-50 border-emerald-200"><div class="flex items-center gap-2 mb-2"><span>‚öñÔ∏è</span><span class="font-medium text-slate-800 text-sm">A&P</span></div><div class="h-1.5 bg-emerald-200 rounded-full"><div class="h-full bg-emerald-500 rounded-full" style="width: 100%"></div></div></div>
          </div>
        </div>
        
        <!-- Brain Dump -->
        <div class="bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden">
          <div class="bg-slate-50 px-6 py-4 border-b border-slate-200 flex items-center gap-3"><div class="w-10 h-10 rounded-xl bg-pink-500 flex items-center justify-center"><span class="text-xl">üß†</span></div><div><h2 class="font-bold text-slate-800">Brain Dump</h2><p class="text-xs text-slate-500">Get it out of your head</p></div></div>
          <div class="p-4"><textarea placeholder="Dump your thoughts..." class="w-full h-20 bg-slate-50 rounded-xl p-3 text-sm border border-slate-200 outline-none resize-none"></textarea><div class="flex justify-end mt-2"><button class="px-4 py-2 bg-violet-600 text-white rounded-xl font-medium text-sm">Dump It üß†</button></div></div>
        </div>
      </div>
      
      <!-- Sidebar -->
      <div class="w-full lg:w-80 space-y-6">
        <div class="bg-gradient-to-br from-violet-600 via-purple-600 to-indigo-700 rounded-2xl p-5 text-white shadow-lg">
          <div class="flex items-center justify-between mb-4"><span class="text-sm text-violet-200">This Week</span><span class="text-xs bg-white/20 px-2 py-0.5 rounded-full">vs Last</span></div>
          <div class="flex items-end justify-between"><div><div class="text-5xl font-black">47</div><div class="text-violet-200 text-sm">üí∞ Money Bags</div></div><div class="text-right"><div class="text-xl text-violet-200 line-through opacity-60">39</div><span class="bg-green-400 text-green-900 text-sm font-bold px-2 py-0.5 rounded-full">‚Üë21%</span></div></div>
        </div>
        
        <div class="bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden">
          <div class="px-5 py-4 border-b border-slate-200 flex items-center justify-between"><span class="font-bold text-slate-800">Today's Queue</span><button class="text-xs text-violet-600">Edit</button></div>
          <div class="p-3 space-y-2">
            <div class="flex items-center gap-3 p-2.5 bg-green-50 border border-green-200 rounded-xl"><div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white text-xs">‚úì</div><span class="text-slate-500 line-through text-sm">Write 3 prayer hooks</span><span class="ml-auto text-xs text-slate-400">18m</span></div>
            <div class="flex items-center gap-3 p-2.5 bg-violet-50 border border-violet-300 rounded-xl"><div class="w-6 h-6 bg-violet-500 rounded-full flex items-center justify-center text-white text-xs font-bold">2</div><span class="text-slate-800 font-medium text-sm">Review TikTok...</span><span class="ml-auto text-xs text-violet-600 font-medium">NOW</span></div>
            <div class="flex items-center gap-3 p-2.5 rounded-xl"><div class="w-6 h-6 bg-slate-200 rounded-full flex items-center justify-center text-slate-600 text-xs">3</div><span class="text-slate-600 text-sm">Spanish brief</span></div>
            <div class="flex items-center gap-3 p-2.5 rounded-xl"><div class="w-6 h-6 bg-slate-200 rounded-full flex items-center justify-center text-slate-600 text-xs">4</div><span class="text-slate-600 text-sm">DMCA updates</span></div>
            <div class="flex items-center gap-3 p-2.5 rounded-xl"><div class="w-6 h-6 bg-slate-200 rounded-full flex items-center justify-center text-slate-600 text-xs">5</div><span class="text-slate-600 text-sm">Neo's store</span></div>
          </div>
        </div>
        
        <div class="bg-blue-50 border border-blue-200 rounded-2xl p-4"><div class="flex items-center gap-3"><span class="text-2xl">üßò</span><div><div class="font-medium text-blue-800">Break in 1 task</div><div class="text-xs text-blue-600">Stretch those legs</div></div></div></div>
        
        <div class="bg-slate-100 rounded-2xl p-4">
          <div class="flex items-center justify-between mb-3"><span class="text-xs text-slate-500 uppercase font-medium">Sound</span><button id="soundToggle" onclick="toggleSound()" class="px-3 py-1 bg-green-500 text-white rounded-lg text-xs font-medium">üîä ON</button></div>
          <div class="grid grid-cols-2 gap-2">
            <button onclick="showConfetti()" class="px-3 py-2 bg-white rounded-xl text-xs font-medium border border-slate-200">üéä Confetti</button>
            <button onclick="showMoney()" class="px-3 py-2 bg-white rounded-xl text-xs font-medium border border-slate-200">üí∞ Money</button>
            <button onclick="showFireworks()" class="px-3 py-2 bg-white rounded-xl text-xs font-medium border border-slate-200">üéÜ Fireworks</button>
            <button onclick="showLegendary()" class="px-3 py-2 bg-gradient-to-r from-yellow-400 to-amber-500 rounded-xl text-xs font-bold text-white">üíé Legendary</button>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  <div id="confetti-container"></div>
  <div id="hype-container" class="fixed inset-0 flex items-center justify-center pointer-events-none z-50" style="display:none;"><div class="text-center hype-pop"><div class="text-5xl font-black text-white drop-shadow-[0_4px_20px_rgba(0,0,0,0.5)]" id="hypeText" style="text-shadow: 0 0 30px rgba(34, 197, 94, 0.8);"></div></div></div>
  <div id="legendary-container" class="fixed inset-0 flex items-center justify-center pointer-events-none z-50" style="display:none;"><div class="fixed inset-0 bg-yellow-400/30 legendary-flash"></div><div class="text-center z-10 hype-pop"><div class="bg-gradient-to-r from-yellow-400 via-amber-500 to-yellow-400 text-black font-black text-4xl px-12 py-4 rounded-xl shadow-2xl">‚ö° LEGENDARY ‚ö°</div><div class="text-7xl mt-4">üíéüëëüíé</div><div class="text-3xl font-black text-white mt-4 drop-shadow-lg" id="legendaryText"></div></div></div>
  
  <script>
    let audioCtx = null, soundEnabled = true;
    function initAudio() { if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)(); }
    function toggleSound() { soundEnabled = !soundEnabled; document.getElementById('soundToggle').textContent = soundEnabled ? 'üîä ON' : 'üîá OFF'; document.getElementById('soundToggle').className = soundEnabled ? 'px-3 py-1 bg-green-500 text-white rounded-lg text-xs font-medium' : 'px-3 py-1 bg-slate-400 text-white rounded-lg text-xs font-medium'; }
    function playSound(t) { if (!soundEnabled) return; initAudio(); const o = audioCtx.createOscillator(), g = audioCtx.createGain(); o.connect(g); g.connect(audioCtx.destination); if (t==='pop') { o.frequency.setValueAtTime(600, audioCtx.currentTime); o.frequency.exponentialRampToValueAtTime(200, audioCtx.currentTime+0.1); g.gain.setValueAtTime(0.3, audioCtx.currentTime); g.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime+0.1); o.start(); o.stop(audioCtx.currentTime+0.1); } else if (t==='cha-ching') { o.frequency.setValueAtTime(1200, audioCtx.currentTime); o.frequency.setValueAtTime(1600, audioCtx.currentTime+0.1); o.frequency.setValueAtTime(2000, audioCtx.currentTime+0.2); g.gain.setValueAtTime(0.2, audioCtx.currentTime); g.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime+0.3); o.start(); o.stop(audioCtx.currentTime+0.3); } else if (t==='boom') { o.type='sawtooth'; o.frequency.setValueAtTime(150, audioCtx.currentTime); o.frequency.exponentialRampToValueAtTime(50, audioCtx.currentTime+0.3); g.gain.setValueAtTime(0.4, audioCtx.currentTime); g.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime+0.3); o.start(); o.stop(audioCtx.currentTime+0.3); } else if (t==='victory') { [523,659,784,1047].forEach((f,i)=>{ const x=audioCtx.createOscillator(),y=audioCtx.createGain(); x.connect(y); y.connect(audioCtx.destination); x.frequency.value=f; y.gain.setValueAtTime(0.2,audioCtx.currentTime+i*0.1); y.gain.exponentialRampToValueAtTime(0.01,audioCtx.currentTime+i*0.1+0.2); x.start(audioCtx.currentTime+i*0.1); x.stop(audioCtx.currentTime+i*0.1+0.2); }); } }
    
    const hypeMessages = ["FUCK YEAH üî•", "HELL YEAH üí™", "LET'S GO üöÄ", "MONEY üí∞", "KING üëë", "UNSTOPPABLE üí•", "GET THAT BAG üíµ", "CRUSHING IT üî®"];
    const legendaryMessages = ["YOU'RE A BEAST ü¶Å", "LEGEND üëë", "BUILT DIFFERENT üíé", "KING SHIT üî•"];
    function screenShake() { document.body.classList.add('shake'); setTimeout(() => document.body.classList.remove('shake'), 500); }
    function showHype(leg=false) { const c = document.getElementById(leg ? 'legendary-container' : 'hype-container'); const m = (leg ? legendaryMessages : hypeMessages)[Math.floor(Math.random()*(leg?legendaryMessages.length:hypeMessages.length))]; if(leg) document.getElementById('legendaryText').textContent=m; else document.getElementById('hypeText').textContent=m; c.style.display='flex'; setTimeout(()=>c.style.display='none', leg?3500:2000); }
    
    // Session tracking
    let timerState = 'stopped', sessionCount = 0, currentSessionStart = null, elapsedMs = 0, timerInterval = null, sessions = [];
    
    function formatTime(ms) { const s = Math.floor(ms/1000); return String(Math.floor(s/60)).padStart(2,'0') + ':' + String(s%60).padStart(2,'0'); }
    
    function updateSessionBadge() {
      const badge = document.getElementById('sessionBadge');
      const num = document.getElementById('sessionNum');
      num.textContent = sessionCount;
      num.classList.add('session-pulse');
      setTimeout(() => num.classList.remove('session-pulse'), 600);
      
      if (sessionCount >= 5) { badge.className = 'flex items-center gap-2 bg-red-500 rounded-full px-3 py-1.5 session-pop'; num.className = 'bg-white text-red-600 text-sm font-bold w-6 h-6 rounded-full flex items-center justify-center'; }
      else if (sessionCount >= 3) { badge.className = 'flex items-center gap-2 bg-yellow-500 rounded-full px-3 py-1.5 session-pop'; num.className = 'bg-white text-yellow-600 text-sm font-bold w-6 h-6 rounded-full flex items-center justify-center'; }
      else { badge.className = 'flex items-center gap-2 bg-white/20 rounded-full px-3 py-1.5 session-pop'; num.className = 'bg-white text-violet-600 text-sm font-bold w-6 h-6 rounded-full flex items-center justify-center'; }
    }
    
    function updateSessionDots() {
      const dots = document.getElementById('sessionDots');
      const ind = document.getElementById('sessionIndicator');
      if (sessionCount >= 1) {
        ind.classList.remove('hidden');
        dots.innerHTML = '';
        for (let i = 0; i < sessionCount; i++) {
          const d = document.createElement('div');
          const done = i < sessionCount - 1 || timerState === 'stopped';
          d.className = 'w-3 h-3 rounded-full dot-appear ' + (done ? 'bg-green-500' : 'bg-violet-500 pulse-opacity');
          d.style.animationDelay = (i * 0.1) + 's';
          dots.appendChild(d);
        }
      }
    }
    
    function startTimer() {
      sessionCount++;
      currentSessionStart = Date.now();
      sessions.push({ num: sessionCount, start: new Date().toLocaleTimeString(), end: null, duration: null });
      timerState = 'running';
      document.getElementById('timerLabel').textContent = 'Session ' + sessionCount + ' in progress...';
      timerInterval = setInterval(() => {
        const sessionElapsed = Date.now() - currentSessionStart;
        const totalElapsed = sessions.slice(0,-1).reduce((s,x)=>s+(x.duration||0),0) + sessionElapsed;
        elapsedMs = totalElapsed;
        document.getElementById('timerDisplay').textContent = formatTime(elapsedMs);
      }, 100);
      updateSessionBadge();
      updateSessionDots();
      updateControls();
      playSound('pop');
    }
    
    function pauseTimer() {
      clearInterval(timerInterval);
      timerState = 'paused';
      const dur = Date.now() - currentSessionStart;
      sessions[sessions.length-1].end = new Date().toLocaleTimeString();
      sessions[sessions.length-1].duration = dur;
      document.getElementById('timerLabel').textContent = 'Paused ‚Äî Resume = Session ' + (sessionCount+1);
      updateSessionDots();
      updateSessionHistory();
      updateControls();
    }
    
    function finishTask() {
      if (timerState === 'running') { clearInterval(timerInterval); const dur = Date.now() - currentSessionStart; sessions[sessions.length-1].end = new Date().toLocaleTimeString(); sessions[sessions.length-1].duration = dur; }
      timerState = 'stopped';
      document.getElementById('timerLabel').textContent = 'Done in ' + sessionCount + ' session' + (sessionCount>1?'s':'') + '!';
      updateSessionHistory();
      updateControls();
      screenShake();
      showConfetti();
      showHype();
    }
    
    function updateSessionHistory() {
      const list = document.getElementById('sessionList');
      const hist = document.getElementById('sessionHistory');
      if (sessions.length > 0) {
        hist.classList.remove('hidden');
        list.innerHTML = '';
        sessions.forEach(s => {
          const d = document.createElement('div');
          d.className = 'flex items-center justify-between p-2 bg-slate-50 rounded-lg text-sm';
          d.innerHTML = '<div class="flex items-center gap-2"><span class="w-5 h-5 bg-violet-100 text-violet-600 rounded-full flex items-center justify-center text-xs font-bold">'+s.num+'</span><span class="text-slate-500">'+s.start+' ‚Üí '+(s.end||'...')+'</span></div><span class="font-medium text-slate-700">'+(s.duration?formatTime(s.duration):'...')+'</span>';
          list.appendChild(d);
        });
      }
    }
    
    function updateControls() {
      const c = document.getElementById('timerControls');
      if (timerState === 'stopped' && sessionCount === 0) {
        c.innerHTML = '<button onclick="startTimer()" class="px-8 py-3 bg-green-500 hover:bg-green-600 rounded-xl font-bold text-white text-lg shadow-lg shadow-green-500/30">‚ñ∂ Start</button>';
      } else if (timerState === 'running') {
        c.innerHTML = '<button onclick="pauseTimer()" class="px-6 py-3 bg-slate-200 hover:bg-slate-300 rounded-xl font-medium text-slate-700">‚è∏ Pause</button><button onclick="finishTask()" class="px-8 py-3 bg-green-500 hover:bg-green-600 rounded-xl font-bold text-white text-lg shadow-lg shadow-green-500/30">‚úì Done</button>';
      } else if (timerState === 'paused') {
        c.innerHTML = '<button onclick="startTimer()" class="px-6 py-3 bg-blue-500 hover:bg-blue-600 rounded-xl font-bold text-white">‚ñ∂ Resume <span class="text-xs opacity-70">(S'+(sessionCount+1)+')</span></button><button onclick="finishTask()" class="px-8 py-3 bg-green-500 hover:bg-green-600 rounded-xl font-bold text-white text-lg shadow-lg shadow-green-500/30">‚úì Done</button>';
      } else {
        c.innerHTML = '<button onclick="resetTask()" class="px-6 py-3 bg-slate-200 hover:bg-slate-300 rounded-xl font-medium text-slate-700">üîÑ New Task</button>';
      }
    }
    
    function resetTask() { timerState='stopped'; sessionCount=0; currentSessionStart=null; elapsedMs=0; sessions=[]; clearInterval(timerInterval); document.getElementById('timerDisplay').textContent='00:00'; document.getElementById('timerLabel').textContent='Ready to start'; document.getElementById('sessionHistory').classList.add('hidden'); document.getElementById('sessionIndicator').classList.add('hidden'); document.getElementById('sessionNum').textContent='1'; document.getElementById('sessionBadge').className='flex items-center gap-2 bg-white/20 rounded-full px-3 py-1.5'; updateControls(); }
    
    // Fire bar
    function setFireLevel(count) {
      const card = document.getElementById('fireCard'), header = document.getElementById('fireHeader'), progress = document.getElementById('fireProgress'), track = document.getElementById('progressTrack'), emojis = document.getElementById('fireEmojis'), countEl = document.getElementById('fireCount'), subtitle = document.getElementById('fireSubtitle'), title = document.getElementById('fireTitle'), badge = document.getElementById('exceededBadge'), exceededCount = document.getElementById('exceededCount'), icon = document.getElementById('fireIcon'), flames = document.getElementById('dancingFlames');
      emojis.innerHTML = ''; flames.innerHTML = '';
      const goal = 8, percent = Math.min((count/goal)*100, 100);
      progress.style.width = percent + '%';
      
      let cardBg, headerBg, borderColor, barColor, iconBg, textColor, subColor, trackBg;
      if (count === 0) { cardBg='#f8fafc'; headerBg='#f8fafc'; borderColor='#e2e8f0'; barColor='#cbd5e1'; iconBg='linear-gradient(135deg,#94a3b8,#64748b)'; textColor='#1e293b'; subColor='#64748b'; trackBg='#e2e8f0'; card.style.boxShadow='none'; card.classList.remove('glow-pulse','pulse-border'); flames.style.opacity='0'; }
      else if (count <= 2) { cardBg='#fff7ed'; headerBg='#ffedd5'; borderColor='#fdba74'; barColor='linear-gradient(90deg,#fdba74,#fb923c)'; iconBg='linear-gradient(135deg,#fb923c,#f97316)'; textColor='#c2410c'; subColor='#ea580c'; trackBg='#fed7aa'; card.style.boxShadow='0 0 15px rgba(251,146,60,0.2)'; card.classList.remove('glow-pulse','pulse-border'); flames.style.opacity='0'; }
      else if (count <= 4) { cardBg='#fff1e6'; headerBg='#ffe4cc'; borderColor='#f97316'; barColor='linear-gradient(90deg,#fb923c,#f97316,#ea580c)'; iconBg='linear-gradient(135deg,#f97316,#ea580c)'; textColor='#9a3412'; subColor='#c2410c'; trackBg='#fed7aa'; card.style.boxShadow='0 0 20px rgba(249,115,22,0.3)'; flames.style.opacity='0'; }
      else if (count <= 6) { cardBg='#fef2e8'; headerBg='#fde1ce'; borderColor='#ea580c'; barColor='linear-gradient(90deg,#f97316,#ea580c,#dc2626)'; iconBg='linear-gradient(135deg,#ea580c,#dc2626)'; textColor='#7c2d12'; subColor='#9a3412'; trackBg='#fdba74'; card.style.boxShadow='0 0 25px rgba(234,88,12,0.4)'; flames.style.opacity='1'; for(let i=0;i<5;i++){const f=document.createElement('span');f.textContent='üî•';f.className='text-2xl flame-dance';f.style.animationDelay=(i*0.15)+'s';flames.appendChild(f);} }
      else if (count <= 8) { cardBg='#fef0e6'; headerBg='#fdded3'; borderColor='#dc2626'; barColor='linear-gradient(90deg,#ea580c,#dc2626,#b91c1c)'; iconBg='linear-gradient(135deg,#dc2626,#b91c1c)'; textColor='#7f1d1d'; subColor='#991b1b'; trackBg='#fca5a5'; card.style.boxShadow='0 0 30px rgba(220,38,38,0.5)'; card.classList.add('pulse-border'); flames.style.opacity='1'; for(let i=0;i<8;i++){const f=document.createElement('span');f.textContent='üî•';f.className='text-3xl flame-dance';f.style.animationDelay=(i*0.1)+'s';flames.appendChild(f);} }
      else { cardBg='linear-gradient(135deg,#fefce8,#fef9c3,#fef08a)'; headerBg='linear-gradient(135deg,#fef08a,#fde047)'; borderColor='#eab308'; barColor='linear-gradient(90deg,#fbbf24,#f59e0b,#d97706,#f59e0b,#fbbf24)'; iconBg='linear-gradient(135deg,#fbbf24,#f59e0b)'; textColor='#713f12'; subColor='#a16207'; trackBg='#fde68a'; card.style.boxShadow='0 0 50px rgba(245,158,11,0.6)'; card.classList.add('glow-pulse','pulse-border'); flames.style.opacity='1'; for(let i=0;i<12;i++){const f=document.createElement('span');f.textContent=i%3===0?'üëë':'üî•';f.className='text-3xl flame-dance fire-legendary';f.style.animationDelay=(i*0.08)+'s';flames.appendChild(f);} }
      
      card.style.background=cardBg; card.style.borderColor=borderColor; header.style.background=headerBg; header.style.borderColor=borderColor; progress.style.background=barColor; track.style.background=trackBg; icon.style.background=iconBg; title.style.color=textColor; subtitle.style.color=subColor;
      countEl.innerHTML='<span style="color:'+(count===0?'#cbd5e1':count>goal?'#d97706':'#ea580c')+'">'+count+'</span><span style="color:#94a3b8"> / '+goal+'</span>';
      if(count===0) subtitle.textContent='Light your first fire!'; else if(count<3) subtitle.textContent='Getting warmed up...'; else if(count<6) subtitle.textContent='Good momentum! üî•'; else if(count<goal) subtitle.textContent='ON FIRE! üî•üî•'; else if(count===goal) subtitle.textContent='Goal reached! üéØ'; else subtitle.textContent='LEGENDARY! üëëüî•üëë';
      if(count>goal){badge.classList.remove('hidden');exceededCount.textContent='+'+(count-goal);}else{badge.classList.add('hidden');}
      const dc=Math.min(count,10); for(let i=0;i<10;i++){const d=document.createElement('div');d.className='flex-1 flex items-center justify-center';if(i<dc){let c=count>goal?'fire-legendary':count>=6?'fire-float':'';d.innerHTML='<span class="text-2xl '+c+'" style="animation-delay:'+(i*0.1)+'s">üî•</span>';}else{d.innerHTML='<div class="w-2.5 h-2.5 rounded-full" style="background:'+(count===0?'#cbd5e1':'#fdba74')+';"></div>';}emojis.appendChild(d);}
    }
    setFireLevel(0);
    
    function showConfetti(){playSound('pop');screenShake();const c=document.getElementById('confetti-container');const cols=['#f59e0b','#22c55e','#3b82f6','#ec4899','#8b5cf6'];for(let i=0;i<80;i++){const d=document.createElement('div');d.className='confetti';d.style.left=Math.random()*100+'vw';d.style.backgroundColor=cols[Math.floor(Math.random()*cols.length)];d.style.animationDelay=Math.random()*0.5+'s';d.style.borderRadius=Math.random()>0.5?'50%':'0';c.appendChild(d);setTimeout(()=>d.remove(),3500);}}
    function showMoney(){playSound('cha-ching');screenShake();const c=document.getElementById('confetti-container');for(let i=0;i<25;i++){const m=document.createElement('div');m.className='money';m.textContent=Math.random()>0.5?'üí∞':'üíµ';m.style.left=Math.random()*100+'vw';m.style.animationDelay=Math.random()*0.8+'s';c.appendChild(m);setTimeout(()=>m.remove(),3500);}showHype();}
    function showFireworks(){playSound('boom');screenShake();const c=document.getElementById('confetti-container');const e=['üéÜ','‚ú®','üí•','üåü'];for(let i=0;i<10;i++){setTimeout(()=>{const f=document.createElement('div');f.className='firework';f.textContent=e[Math.floor(Math.random()*e.length)];f.style.left=(15+Math.random()*70)+'vw';f.style.top=(15+Math.random()*50)+'vh';c.appendChild(f);setTimeout(()=>f.remove(),1500);},i*120);}showHype();}
    function showLegendary(){playSound('victory');screenShake();showHype(true);showConfetti();setTimeout(showMoney,300);setTimeout(showFireworks,600);}
  </script>
</body>
</html>
